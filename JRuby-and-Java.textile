*{color:red}Please check out "Cuke4Duke":http://wiki.github.com/aslakhellesoy for a better way to use Cucumber on the JVM*

Cucumber runs fine on "JRuby":http://jruby.codehaus.org/. This means you can use Cucumber with plain Java code.

h2. Installing Cucumber in JRuby

To get started, you need the JDK, JRuby and Cucumber installed. I'm assuming you already know how to install a JDK - you probably already have it installed since you're reading this page.

h3. Install JRuby

Just download the latest "binary distribution":http://dist.codehaus.org/jruby/, unpack it and make sure the bin directory is on your <code>PATH</code>. Run the following command to update RubyGems:

<pre>jruby -S gem update --system</pre>

 To check that you have installed it properly, try out the following commands:

<pre>jruby --version</pre>

and

<pre>jruby -S rake --version</pre>

h3. Install Cucumber into JRuby

Just use the <code>gem</code> command from JRuby:

<pre>jruby -S gem install cucumber</pre>

To check that you have it installed properly, run:

<pre>jruby -S cucumber --help</pre>

When you run <code>jruby</code> with the <code>-S</code> switch, jruby will look for the script (in this case <code>cucumber</code>) in jruby's <code>bin</code> directory before it starts looking at the <code>PATH</code>. It will find the <code>cucumber</code> ruby script that was created when you installed the gem inside JRuby's <code>bin</code> directory.

h2. Running the examples

The "examples":http://github.com/aslakhellesoy/cucumber/tree/master/examples are included in the gem.

Open a command prompt and cd to the Cucumber examples directory. You'll find them under <code>$JRUBY_HOME/lib/ruby/gems/1.8/gems/cucumber-X.Y.Z/examples</code>. (Replace <code>X.Y.Z</code> with the Cucumber version you installed above).

If you pulled the Cucumber code with Git, you'll find the examples under <code>examples</code>.

h3. Run the plain ruby example

<pre><code>cd i18n/en
jruby -S cucumber features
</code></pre>

The Code under test is pure Ruby, so it's not that interesting in the context of JRuby.

h3. Run the Java example

<pre><code>cd java
jruby -S rake features
</code></pre>

This will compile the java code and then run Cucumber features against that code.

h3. Using Maven

Apache "Maven":http://maven.apache.org/ is a popular build tool for Java. If you're already using Maven you might be interested in running Cucumber with Maven too. Check out the "cuke4duke":http://wiki.github.com/aslakhellesoy/cuke4duke project, which has a Maven plugin that lets you run Cucumber from Maven.

(An older approach is described in "Madaspeak's great blog post":http://binil.wordpress.com/2008/10/29/running-cucumber-on-jrubymaven/).

h3. Using Ant

Here is an example build file:

<pre><code><project name="Cucumber Demo" default="cucumber" basedir=".">
  <target name ="compile" description="Compile classes">
    <mkdir dir="build" />
    <javac srcdir="src" destdir="build" />
  </target>

  <target name="cucumber" depends="compile" description="Run Cucumber">
    <property environment="ENV" />
    <java classname="org.jruby.Main" fork="true" failonerror="true">
      <classpath>
        <pathelement path="${ENV.JRUBY_HOME}/lib/jruby.jar"/>
        <pathelement path="build"/>
      </classpath>
      <jvmarg value="-Djruby.home=${ENV.JRUBY_HOME}"/>
      <arg value="-S"/>
      <arg value="cucumber"/>
      <arg value="--format"/>
      <arg value="pretty"/>
      <arg value="--format"/>
      <arg value="junit"/>
      <arg value="--out"/>
      <arg value="build"/>
      <arg value="features"/>
    </java>
  </target>
</project></code></pre>

You can find the full example under <pre>examples/java</pre> in the Cucumber source code

h2. Seen elsewhere

Please add link to examples using Cucumber and JRuby or Java here:

* <a href="http://andymaleh.blogspot.com/2008/12/glimmers-got-bdd-through-rspec-and.html">Glimmer's Got BDD through RSpec and SWTBot</a>
* <a href="http://andymaleh.blogspot.com/2008/12/first-example-of-glimmer-rspecswtbot.html">First Code Example of Glimmer RSpec/SWTBot Testing</a>
* <a href="http://blog.demetriusnunes.com/past/2009/6/9/who_said_you_cant_test_swing_apps/">Testing Swing applications with Swinger and Cucumber</a>